{"ast":null,"code":"import _objectSpread from\"/home/ilan/Documents/Developement/Mes_projets/BlogWebJunior/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ilan/Documents/Developement/Mes_projets/BlogWebJunior/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{Editor}from\"react-draft-wysiwyg\";import{EditorState,convertToRaw}from\"draft-js\";import notFound from'../../ressources/img/not-found.jpg';import SendIcon from'@material-ui/icons/Send';import draftToHtml from'draftjs-to-html';import Article from'./Article';import isUndefined from\"../../utils/isUndefined\";import{Button,Paper,TextField}from\"@material-ui/core\";import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import\"../../ressources/scss/components/AdminSection.scss\";import Modal from\"../components/ect/Modal\";import checkStringSize from\"../../utils/checkStringSize\";import checkObjectBoolValue from\"../../utils/checkObjectBoolValue\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminEditorSection(){var errStateObject={errOnTitle:false,errOnDesc:false,errOnContent:false,errOnImg:false};//let [postState, setPostState] = useState(false);\nvar _useState=useState(errStateObject),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var titleInput=useRef(document.createElement(\"input\"));var descInput=useRef(document.createElement(\"input\"));var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),preview=_useState4[0],setPreview=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),headerImg=_useState6[0],setHeaderImg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var _useState9=useState(function(){return EditorState.createEmpty();}),_useState10=_slicedToArray(_useState9,2),editorState=_useState10[0],setEditorState=_useState10[1];var submitArticle=function submitArticle(){errStateObject={errOnTitle:checkStringSize(titleInput.current.value,20,'greater')||titleInput.current.value.length===0?true:false,errOnDesc:checkStringSize(descInput.current.value,40,'greater')||descInput.current.value.length===0?true:false,errOnContent:draftToHtml(convertToRaw(editorState.getCurrentContent())).length<=8?true:false,errOnImg:isUndefined(headerImg)?true:false};checkObjectBoolValue(errStateObject,true)?setError(errStateObject):sendArticle({author:\"אילן סיאדה\",img:headerImg.img,title:titleInput.current.value,desc:descInput.current.value,content:draftToHtml(convertToRaw(editorState.getCurrentContent())),publishDate:new Date(),commentsNum:\"0\",viewNum:\"0\",likeNum:\"0\"});};var sendArticle=function sendArticle(article){var formData=new FormData();formData.append('image',article.img,article.img.name);formData.append(\"document\",JSON.stringify(_objectSpread(_objectSpread({},article),{},{img:article.img.name})));axios.post(\"api/article\",formData,{headers:{'Accept':'application/json','Content-Type':'multipart/form-data'}}).then(function(res){console.log(res);}).catch(function(error){console.log(error);});};var handleOpen=function handleOpen(){var content=draftToHtml(convertToRaw(editorState.getCurrentContent()));setPreview({id:0,author:\"אילן סיאדה\",img:isUndefined(headerImg)?notFound:headerImg.url,title:titleInput.current.value,desc:descInput.current.value,content:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:content}}),publishDate:new Date(),commentsNum:0,viewNum:0,likeNum:0});setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleImgUpload=function handleImgUpload(e){var files=e.target.files;var url=URL.createObjectURL(files[0]);setHeaderImg({img:files[0],url:url,alt:files[0].name.split(\".\")[0]});};useEffect(function(){},[editorState]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Article builder\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"article-editor\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();submitArticle();},className:\"article-editor-form\",children:[/*#__PURE__*/_jsx(TextField,{error:error.errOnTitle,placeholder:\"title article \",variant:\"outlined\",inputRef:titleInput}),/*#__PURE__*/_jsx(TextField,{error:error.errOnDesc,placeholder:\"Description\",multiline:true,rows:4,variant:\"outlined\",inputRef:descInput}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-image\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Image header for preview\"}),headerImg&&/*#__PURE__*/_jsx(\"img\",{style:{width:\"20%\",height:\"auto\"},src:headerImg.url,alt:headerImg.name}),/*#__PURE__*/_jsxs(Button,{className:\"button-color\",variant:\"contained\",component:\"label\",children:[\"upload image\",/*#__PURE__*/_jsx(\"input\",{onChange:handleImgUpload,accept:\"image/*\",id:\"image\",type:\"file\",hidden:true})]})]}),/*#__PURE__*/_jsx(Editor,{editorState:editorState,onEditorStateChange:setEditorState}),/*#__PURE__*/_jsxs(\"div\",{className:\"errorDisplay\",children:[error.errOnTitle&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"The title is empty or too much long \"}),error.errOnDesc&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"The description is empty or too much long\"}),error.errOnImg&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Image to the header is missing\"}),error.errOnContent&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"The content is empty!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"final-buttons\",children:[/*#__PURE__*/_jsx(Button,{className:\"button-color\",type:\"submit\",variant:\"contained\",endIcon:/*#__PURE__*/_jsx(SendIcon,{}),children:\"Send\"}),/*#__PURE__*/_jsx(Button,{className:\"button-color\",onClick:handleOpen,children:\"Show preview\"})]})]}),open&&/*#__PURE__*/_jsx(Modal,{handleClose:handleClose,children:/*#__PURE__*/_jsx(Paper,{elevation:3,className:\"display-article\",style:{minHeight:\"80vh\",width:\"80%\",margin:\"auto\"},children:/*#__PURE__*/_jsx(Article,{article:preview})})})]})]});}","map":{"version":3,"sources":["/home/ilan/Documents/Developement/Mes_projets/BlogWebJunior/client/src/common/mainComponents/AdminEditorSection.tsx"],"names":["React","useEffect","useState","useRef","Editor","EditorState","convertToRaw","notFound","SendIcon","draftToHtml","Article","isUndefined","Button","Paper","TextField","Modal","checkStringSize","checkObjectBoolValue","axios","AdminEditorSection","errStateObject","errOnTitle","errOnDesc","errOnContent","errOnImg","error","setError","titleInput","document","createElement","descInput","preview","setPreview","undefined","headerImg","setHeaderImg","open","setOpen","createEmpty","editorState","setEditorState","submitArticle","current","value","length","getCurrentContent","sendArticle","author","img","title","desc","content","publishDate","Date","commentsNum","viewNum","likeNum","article","formData","FormData","append","name","JSON","stringify","post","headers","then","res","console","log","catch","handleOpen","id","url","__html","handleClose","handleImgUpload","e","files","target","URL","createObjectURL","alt","split","preventDefault","width","height","color","minHeight","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport { EditorState, convertToRaw } from \"draft-js\";\nimport notFound from '../../ressources/img/not-found.jpg';\nimport SendIcon from '@material-ui/icons/Send';\nimport draftToHtml from 'draftjs-to-html';\nimport Article from './Article';\nimport isUndefined from \"../../utils/isUndefined\";\nimport { Button, Paper, TextField } from \"@material-ui/core\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport \"../../ressources/scss/components/AdminSection.scss\";\nimport Modal from \"../components/ect/Modal\";\nimport checkStringSize from \"../../utils/checkStringSize\";\nimport checkObjectBoolValue from \"../../utils/checkObjectBoolValue\";\nimport axios from \"axios\";\n\nexport default function AdminEditorSection() {\n    let errStateObject = {\n        errOnTitle: false,\n        errOnDesc: false,\n        errOnContent: false,\n        errOnImg: false\n    };\n    //let [postState, setPostState] = useState(false);\n    let [error, setError] = useState(errStateObject);\n    let titleInput = useRef(document.createElement(\"input\"));\n    let descInput = useRef(document.createElement(\"input\"));\n    let [preview, setPreview] = useState<any>('');\n    let [headerImg, setHeaderImg] = useState<any>(undefined);\n    const [open, setOpen] = useState(false);\n\n    let [editorState, setEditorState] = useState(() =>\n        EditorState.createEmpty()\n    )\n    let submitArticle = () => {\n        errStateObject = {\n            errOnTitle: checkStringSize(titleInput.current.value, 20, 'greater') || titleInput.current.value.length === 0 ? true : false,\n            errOnDesc: checkStringSize(descInput.current.value, 40, 'greater') || descInput.current.value.length === 0 ? true : false,\n            errOnContent: draftToHtml(convertToRaw(editorState.getCurrentContent())).length <= 8 ? true : false,\n            errOnImg: isUndefined(headerImg) ? true : false\n        }\n        checkObjectBoolValue(errStateObject, true) ?\n            setError(errStateObject)\n            :\n            sendArticle({\n                author: \"אילן סיאדה\",\n                img: headerImg.img,\n                title: titleInput.current.value,\n                desc: descInput.current.value,\n                content: draftToHtml(convertToRaw(editorState.getCurrentContent())),\n                publishDate: new Date(),\n                commentsNum: \"0\",\n                viewNum: \"0\",\n                likeNum: \"0\"\n            });\n    }\n    let sendArticle = (article: any) => {\n        let formData = new FormData();\n        formData.append('image', article.img, article.img.name);\n        formData.append(\"document\", JSON.stringify({ ...article, img: article.img.name }));\n        axios.post(`api/article`, formData, { headers: { 'Accept': 'application/json', 'Content-Type': 'multipart/form-data' } })\n            .then((res) => {\n                console.log(res)\n\n            })\n            .catch((error) => {\n                console.log(error);\n            })\n    }\n    let handleOpen = () => {\n\n        let content = draftToHtml(convertToRaw(editorState.getCurrentContent()));\n        setPreview({\n            id: 0,\n            author: \"אילן סיאדה\",\n            img: isUndefined(headerImg) ? notFound : headerImg.url,\n            title: titleInput.current.value,\n            desc: descInput.current.value,\n            content: <div dangerouslySetInnerHTML={{ __html: content }} />,\n            publishDate: new Date(),\n            commentsNum: 0,\n            viewNum: 0,\n            likeNum: 0,\n        })\n        setOpen(true);\n    };\n\n    let handleClose = () => {\n        setOpen(false);\n    };\n    let handleImgUpload = (e: any) => {\n        let { files } = e.target;\n        let url = URL.createObjectURL(files[0]);\n        setHeaderImg({ img: files[0], url, alt: files[0].name.split(\".\")[0] });\n    }\n    useEffect(() => {\n\n    }, [editorState]);\n\n    return (\n        <div className=\"admin-section\">\n            <h1>Article builder</h1>\n            <div className=\"article-editor\">\n                <form\n                    onSubmit={(e) => {\n                        e.preventDefault();\n                        submitArticle();\n                    }}\n                    className=\"article-editor-form\">\n\n                    <TextField\n                        error={error.errOnTitle}\n                        placeholder=\"title article \"\n                        variant=\"outlined\"\n                        inputRef={titleInput}\n                    />\n                    <TextField\n                        error={error.errOnDesc}\n                        placeholder=\"Description\"\n                        multiline\n                        rows={4}\n                        variant=\"outlined\"\n                        inputRef={descInput}\n                    />\n                    <div className=\"upload-image\">\n                        <h3>Image header for preview</h3>\n\n                        {headerImg && <img style={{ width: \"20%\", height: \"auto\" }} src={headerImg.url} alt={headerImg.name} />}\n                        <Button\n                            className=\"button-color\"\n                            variant=\"contained\"\n                            component=\"label\"\n                        >\n                            upload image\n                            <input\n\n                                onChange={handleImgUpload}\n                                accept=\"image/*\"\n                                id=\"image\"\n                                type=\"file\"\n                                hidden\n                            />\n\n                        </Button>\n                    </div>\n\n                    <Editor\n                        editorState={editorState}\n                        onEditorStateChange={setEditorState}\n                    />\n                    <div className=\"errorDisplay\">\n                        {error.errOnTitle && <p style={{ color: \"red\" }}>The title is empty or too much long </p>}\n                        {error.errOnDesc && <p style={{ color: \"red\" }}>The description is empty or too much long</p>}\n                        {error.errOnImg && <p style={{ color: \"red\" }}>Image to the header is missing</p>}\n                        {error.errOnContent && <p style={{ color: \"red\" }}>The content is empty!</p>}\n                    </div>\n\n                    <div className=\"final-buttons\">\n                        <Button\n                            className=\"button-color\"\n                            type=\"submit\"\n                            variant=\"contained\"\n                            endIcon={<SendIcon />}\n                        >\n                            Send\n                        </Button>\n                        <Button className=\"button-color\" onClick={handleOpen}>Show preview</Button>\n                    </div>\n\n                </form>\n                {open && <Modal\n                    handleClose={handleClose}\n                >\n                    <Paper\n                        elevation={3}\n                        className=\"display-article\"\n                        style={{ minHeight: \"80vh\", width: \"80%\", margin: \"auto\" }}\n                    >\n                        <Article article={preview} />\n                    </Paper>\n\n                </Modal>}\n            </div>\n\n\n        </div >\n    );\n\n}"]},"metadata":{},"sourceType":"module"}