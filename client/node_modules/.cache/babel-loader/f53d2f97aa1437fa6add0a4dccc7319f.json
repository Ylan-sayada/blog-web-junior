{"ast":null,"code":"var _jsxFileName = \"/home/ilan/Documents/Developement/Mes_projets/WebJuniorBlog/client/blog-web-junior2/src/common/components/ect/MessageInterface.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport MessageForm from '../../vendorComponents/materialUi/input/MessageForm';\nimport FineSep from '../sep/FineSep';\nimport AddIcon from '@material-ui/icons/Add';\nimport ExtendedBtn from '../buttons/ExtendedBtn';\nimport { CircularProgress } from '@material-ui/core';\nimport { ReactComponent as SendPost } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../ressources/img/sendPost.svg\";\nimport Comments from './Comments';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MessageInterface(props) {\n  _s();\n\n  let [comments, setComments] = useState([]);\n  let [currentIndex, setCurrentIndex] = useState(3);\n  let [numOfArticle, setnumOfArticle] = useState(0);\n  let [hasPosted, setHasposted] = useState(false);\n\n  let addMsgToDisplay = async (id, currentIndex) => {\n    await axios.get(`/api/comments/${id}/${currentIndex}/3`).then(res => {\n      setCurrentIndex(currentIndex + 3);\n      let arrData = res.data.map(el => {\n        return {\n          author: el.name,\n          date: el.date,\n          msg: el.text\n        };\n      });\n      setComments(previous => [...previous, ...arrData]);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    let getFirstMsg = async id => {\n      return await axios.get(`/api/comments/${id}/0/3`).then(res => {\n        return res;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    getFirstMsg(props.id).then(result => {\n      let orderList = result.data[1].map(el => {\n        return {\n          author: el.name,\n          date: el.date,\n          msg: el.text\n        };\n      });\n      setComments(orderList);\n      setnumOfArticle(result.data[0]);\n    });\n  }, [props.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05D2\\u05D5\\u05D1\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), hasPosted ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-evenly\",\n        fontSize: \"1.2rem\",\n        padding: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u05D4\\u05EA\\u05D2\\u05D5\\u05D1\\u05D4 \\u05E0\\u05E9\\u05DC\\u05D7\\u05D4 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4! \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 150\n      }, this), /*#__PURE__*/_jsxDEV(SendPost, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 184\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 26\n    }, this) : /*#__PURE__*/_jsxDEV(MessageForm, {\n      postState: setHasposted,\n      id: props.id,\n      action: \"/api/comments/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(FineSep, {\n      dashed: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"\\u05EA\\u05D2\\u05D5\\u05D1\\u05D5\\u05EA (\", numOfArticle, \")  \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), !comments ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        padding: \"20px 0\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 105\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 27\n    }, this) : comments.map((comment, index) => {\n      switch (index) {\n        case 0:\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Comments, {\n              comments: comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 65\n            }, this), /*#__PURE__*/_jsxDEV(FineSep, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 96\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 37\n          }, this);\n          break;\n\n        case comments.length - 1:\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(FineSep, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 65\n            }, this), /*#__PURE__*/_jsxDEV(Comments, {\n              comments: comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 76\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 37\n          }, this);\n          break;\n\n        default:\n          return /*#__PURE__*/_jsxDEV(Comments, {\n            comments: comment\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 36\n          }, this);\n      }\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      children: numOfArticle > comments.length && /*#__PURE__*/_jsxDEV(ExtendedBtn, {\n        onClick: () => addMsgToDisplay(props.id, currentIndex),\n        customStyle: {\n          backgroundColor: '#03a9f4',\n          color: '#fff',\n          margin: \"20px 0\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u05D4\\u05E6\\u05D2 \\u05E2\\u05D5\\u05D3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MessageInterface, \"UQYQYrcJ1GyynFraJD5EOipzc/E=\");\n\n_c = MessageInterface;\nexport default _c2 = /*#__PURE__*/React.memo(MessageInterface);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MessageInterface\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/ilan/Documents/Developement/Mes_projets/WebJuniorBlog/client/blog-web-junior2/src/common/components/ect/MessageInterface.tsx"],"names":["React","useEffect","useState","MessageForm","FineSep","AddIcon","ExtendedBtn","CircularProgress","Comments","axios","MessageInterface","props","comments","setComments","currentIndex","setCurrentIndex","numOfArticle","setnumOfArticle","hasPosted","setHasposted","addMsgToDisplay","id","get","then","res","arrData","data","map","el","author","name","date","msg","text","previous","catch","error","console","log","getFirstMsg","result","orderList","display","alignItems","justifyContent","fontSize","padding","comment","index","length","backgroundColor","color","margin","memo"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport MessageForm from '../../vendorComponents/materialUi/input/MessageForm'\nimport FineSep from '../sep/FineSep';\nimport AddIcon from '@material-ui/icons/Add';\nimport ExtendedBtn from '../buttons/ExtendedBtn';\nimport { CircularProgress } from '@material-ui/core';\nimport { ReactComponent as SendPost } from '../../../ressources/img/sendPost.svg';\nimport Comments from './Comments';\nimport axios from 'axios';\n\n\nfunction MessageInterface(props: { id: string }) {\n    let [comments, setComments] = useState<any[]>([]);\n    let [currentIndex, setCurrentIndex] = useState(3);\n    let [numOfArticle, setnumOfArticle] = useState(0);\n    let [hasPosted, setHasposted] = useState(false);\n    let addMsgToDisplay = async (id: string, currentIndex: number) => {\n        await axios.get(`/api/comments/${id}/${currentIndex}/3`)\n            .then((res) => {\n                setCurrentIndex(currentIndex + 3);\n                let arrData = res.data.map((el: any) => {\n                    return { author: el.name, date: el.date, msg: el.text };\n                })\n                setComments((previous) => [...previous, ...arrData])\n\n            })\n            .catch(function (error) {\n                console.log(error);\n            })\n    }\n    useEffect(() => {\n        let getFirstMsg = async (id?: string) => {\n            return await axios.get(`/api/comments/${id}/0/3`)\n                .then((res) => {\n                    return res;\n                })\n                .catch(function (error) {\n                    console.log(error);\n                })\n        }\n        getFirstMsg(props.id)\n            .then((result: any) => {\n                let orderList = result.data[1].map((el: any) => {\n                    return { author: el.name, date: el.date, msg: el.text };\n                });\n                setComments(orderList);\n                setnumOfArticle(result.data[0]);\n            });\n    }, [props.id]);\n\n    return (\n        <div className=\"message-interface\">\n            <h3>הוסף תגובה</h3>\n            {hasPosted ? <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\", fontSize: \"1.2rem\", padding: \"20px\" }}><span>התגובה נשלחה בהצלחה! </span><SendPost /></div> :\n                <MessageForm postState={setHasposted} id={props.id} action=\"/api/comments/\" />}\n            <FineSep dashed />\n            <h3>תגובות ({numOfArticle})  </h3>\n\n            { !comments ? <div style={{ display: \"flex\", justifyContent: \"center\", padding: \"20px 0\" }}><CircularProgress /></div>\n                :\n                comments.map((comment, index) => {\n                    switch (index) {\n                        case 0:\n                            return (<React.Fragment key={index}><Comments comments={comment} /><FineSep /></React.Fragment>)\n                            break;\n                        case (comments.length - 1):\n                            return (<React.Fragment key={index}><FineSep /><Comments comments={comment} /></React.Fragment>)\n                            break;\n                        default:\n                            return <Comments comments={comment} key={index} />\n                    }\n                })}\n            <div style={{\n                display: 'flex', justifyContent: 'center'\n            }}>\n                {numOfArticle > comments.length &&\n                    <ExtendedBtn\n                        onClick={() => addMsgToDisplay(props.id, currentIndex)}\n                        customStyle={{ backgroundColor: '#03a9f4', color: '#fff', margin: \"20px 0\" }}\n                    >\n                        <span>הצג עוד</span>\n                        <AddIcon />\n                    </ExtendedBtn>\n                }\n            </div >\n        </div >\n    )\n\n}\nexport default React.memo(MessageInterface);\n"]},"metadata":{},"sourceType":"module"}